# –°–∞–π—Ç—Ç–∞“ì—ã “õ–∞—Ç–µ–ª–µ—Ä–¥—ñ —Ç“Ø–∑–µ—Ç—É –µ—Å–µ–±—ñ

## ‚úÖ –û—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω —Ç“Ø–∑–µ—Ç—É–ª–µ—Ä

### 1. **Dockerfile –∂”ô–Ω–µ Docker Compose –º”ô—Å–µ–ª–µ–ª–µ—Ä—ñ** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- `server.js` —Ñ–∞–π–ª—ã–Ω —Ç–∞–±—É –∂–æ–ª—ã –¥“±—Ä—ã—Å –µ–º–µ—Å –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω
- Next.js standalone output “õ“±—Ä—ã–ª—ã–º—ã –¥“±—Ä—ã—Å –µ—Å–∫–µ—Ä—ñ–ª–º–µ–≥–µ–Ω

#### –®–µ—à—É:
- `Dockerfile` –∂”ô–Ω–µ `Dockerfile.frontend` —Ñ–∞–π–ª–¥–∞—Ä—ã–Ω–∞ –¥“±—Ä—ã—Å –∂–æ–ª —Ç–µ–∫—Å–µ—Ä—É—ñ “õ–æ—Å—ã–ª–¥—ã
- `docker-compose.yml` —Ñ–∞–π–ª—ã–Ω–¥–∞ –∫–æ–º–∞–Ω–¥–∞ –∂–æ–ª—ã –¥“±—Ä—ã—Å—Ç–∞–ª–¥—ã
- –ï–∫—ñ –Ω“±—Å“õ–∞–Ω—ã —Ç–µ–∫—Å–µ—Ä—É: `/app/server.js` –Ω–µ–º–µ—Å–µ `/app/app/server.js`

**”®–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä:**
```dockerfile
# –ï—Å–∫—ñ:
CMD ["node", "server.js"]

# –ñ–∞“£–∞:
CMD ["sh", "-c", "if [ -f server.js ]; then node server.js; elif [ -f app/server.js ]; then node app/server.js; else echo 'server.js —Ñ–∞–π–ª—ã —Ç–∞–±—ã–ª–º–∞–¥—ã'; exit 1; fi"]
```

---

### 2. **Environment Variables –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- `.env.local` —Ñ–∞–π–ª—ã –∂–æ“õ –Ω–µ–º–µ—Å–µ –¥“±—Ä—ã—Å –±–∞–ø—Ç–∞–ª–º–∞“ì–∞–Ω
- “ö–∞–∂–µ—Ç—Ç—ñ –æ—Ä—Ç–∞ –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä –∞–Ω—ã“õ—Ç–∞–ª–º–∞“ì–∞–Ω

#### –®–µ—à—É:
- `env.example` —Ñ–∞–π–ª—ã “õ“±—Ä—ã–ª–¥—ã (–º—ã—Å–∞–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –ë–∞—Ä–ª—ã“õ “õ–∞–∂–µ—Ç—Ç—ñ –æ—Ä—Ç–∞ –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä —Ç—ñ–∑—ñ–º–¥–µ–ª–¥—ñ

**“ö–∞–∂–µ—Ç—Ç—ñ –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä:**
- `DATABASE_URL` - PostgreSQL –±–∞–π–ª–∞–Ω—ã—Å—ã
- `JWT_SECRET` - JWT —Ç–æ–∫–µ–Ω–¥–µ—Ä “Ø—à—ñ–Ω
- `NEXT_PUBLIC_BASE_URL` - API —à–∞“õ—ã—Ä—É–ª–∞—Ä—ã “Ø—à—ñ–Ω
- `NEXTAUTH_URL`, `NEXTAUTH_SECRET` - NextAuth “Ø—à—ñ–Ω
- Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª–¥—ã)

**“ö–æ–ª–¥–∞–Ω—É:**
```bash
# env.example —Ñ–∞–π–ª—ã–Ω .env.local —Ä–µ—Ç—ñ–Ω–¥–µ –∫”©—à—ñ—Ä—É
cp env.example .env.local

# –°–æ–¥–∞–Ω –∫–µ–π—ñ–Ω .env.local —Ñ–∞–π–ª—ã–Ω ”©–∑–≥–µ—Ä—Ç—É
# DATABASE_URL –∂”ô–Ω–µ JWT_SECRET –º”ô–Ω–¥–µ—Ä—ñ–Ω ”©–∑–≥–µ—Ä—Ç—É
```

---

### 3. **Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã** ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞:
- Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã –∂–æ“õ –±–æ–ª“ì–∞–Ω–¥–∞ “õ–∞—Ç–µ –±–µ—Ä—É—ñ –º“Ø–º–∫—ñ–Ω
- –ï—Å–∫–µ—Ä—Ç—É —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã –¥“±—Ä—ã—Å –µ–º–µ—Å

#### –®–µ—à—É:
- Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—É “õ–æ—Å—ã–ª–¥—ã
- –ï–≥–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∂–æ“õ –±–æ–ª—Å–∞, `null` “õ–∞–π—Ç–∞—Ä—É
- “ö–∞—Ç–µ–ª–µ—Ä–¥—ñ –¥“±—Ä—ã—Å ”©“£–¥–µ—É

**”®–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä:**
- `getFirebaseApp()` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã `null` “õ–∞–π—Ç–∞—Ä–∞ –∞–ª–∞–¥—ã
- `getFirebaseAuth()` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã “õ–æ—Å—ã–ª–¥—ã
- –ï—Å–∫—ñ API “Ø—à—ñ–Ω fallback —Å–∞“õ—Ç–∞–ª–¥—ã

---

### 4. **Prisma –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã** ‚úÖ

#### –¢–µ–∫—Å–µ—Ä—É:
- Prisma schema –¥“±—Ä—ã—Å
- Prisma –∫–ª–∏–µ–Ω—Ç—ñ –¥“±—Ä—ã—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–ª–∞–Ω“ì–∞–Ω
- –ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å –∫–æ–¥—Ç–∞—Ä—ã–Ω–¥–∞ fallback –º–µ—Ö–∞–Ω–∏–∑–º–¥–µ—Ä –±–∞—Ä

#### –ù”ô—Ç–∏–∂–µ:
- Prisma –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã –¥“±—Ä—ã—Å, “õ–æ—Å—ã–º—à–∞ —Ç“Ø–∑–µ—Ç—É “õ–∞–∂–µ—Ç –µ–º–µ—Å

---

### 5. **Next.js Build –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã** ‚úÖ

#### –¢–µ–∫—Å–µ—Ä—É:
- `next.config.mjs` –¥“±—Ä—ã—Å –±–∞–ø—Ç–∞–ª“ì–∞–Ω
- `output: 'standalone'` —Ä–µ–∂–∏–º—ñ “õ–æ—Å—ã–ª“ì–∞–Ω
- TypeScript –∂”ô–Ω–µ ESLint “õ–∞—Ç–µ–ª–µ—Ä—ñ –µ–ª–µ–º–µ–π–¥—ñ (–¥–∞–º—ã—Ç—É “Ø—à—ñ–Ω)

#### –ù”ô—Ç–∏–∂–µ:
- Build –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã –¥“±—Ä—ã—Å

---

## üìã “ö–∞–ª“ì–∞–Ω “õ–∞–¥–∞–º–¥–∞—Ä

### 1. Environment Variables –æ—Ä–Ω–∞—Ç—É
```bash
# 1. env.example —Ñ–∞–π–ª—ã–Ω .env.local —Ä–µ—Ç—ñ–Ω–¥–µ –∫”©—à—ñ—Ä—É
cp env.example .env.local

# 2. .env.local —Ñ–∞–π–ª—ã–Ω –∞—à—ã–ø, –º”ô–Ω–¥–µ—Ä–¥—ñ ”©–∑–≥–µ—Ä—Ç—É:
#    - DATABASE_URL: PostgreSQL –±–∞–π–ª–∞–Ω—ã—Å—ã
#    - JWT_SECRET: –ö–µ–º—ñ–Ω–¥–µ 32 —Ç–∞“£–±–∞–¥–∞–Ω —Ç“±—Ä–∞—Ç—ã–Ω –∫–µ–∑–¥–µ–π—Å–æ“õ –º”ô—Ç—ñ–Ω
```

### 2. –ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –¥–∞–π—ã–Ω–¥–∞—É
```bash
# 1. PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–Ω —ñ—Å–∫–µ “õ–æ—Å—É
docker-compose up postgres -d

# 2. Prisma –∫–ª–∏–µ–Ω—Ç—ñ–Ω generate –µ—Ç—É
npx prisma generate

# 3. –ú–∏–≥—Ä–∞—Ü–∏—è–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞—É
npx prisma migrate deploy

# 4. (–û–ø—Ü–∏–æ–Ω–∞–ª–¥—ã) Mock –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∏–º–ø–æ—Ä—Ç—Ç–∞—É
npm run import-data
```

### 3. –õ–æ–∫–∞–ª—å–¥—ñ –¥–∞–º—ã—Ç—É —Ä–µ–∂–∏–º—ñ–Ω–¥–µ —Ç–µ—Å—Ç—ñ–ª–µ—É
```bash
# 1. –¢”ô—É–µ–ª–¥—ñ–ª—ñ–∫—Ç–µ—Ä–¥—ñ –æ—Ä–Ω–∞—Ç—É
npm install

# 2. –î–∞–º—ã—Ç—É —Å–µ—Ä–≤–µ—Ä—ñ–Ω —ñ—Å–∫–µ “õ–æ—Å—É
npm run dev

# 3. –ë—Ä–∞—É–∑–µ—Ä–¥–µ –∞—à—É: http://localhost:3000
```

### 4. Docker-–¥–∞ —Ç–µ—Å—Ç—ñ–ª–µ—É
```bash
# 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–ª–µ—Ä–¥—ñ “õ“±—Ä–∞—Å—Ç—ã—Ä—É
docker-compose build

# 2. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–ª–µ—Ä–¥—ñ —ñ—Å–∫–µ “õ–æ—Å—É
docker-compose up

# 3. –õ–æ–≥—Ç–∞—Ä–¥—ã –∫”©—Ä—É (–º”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω)
docker-compose logs -f
```

---

## üîç –ú”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞–ª–∞—É

### –ï–≥–µ—Ä —Å–∞–π—Ç –∂“±–º—ã—Å —ñ—Å—Ç–µ–º–µ—Å–µ:

1. **–ë—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å—ñ–Ω–¥–µ “õ–∞—Ç–µ–ª–µ—Ä–¥—ñ —Ç–µ–∫—Å–µ—Ä—É:**
   - F12 –±–∞—Å—ã“£—ã–∑
   - Console “õ–æ–π—ã–Ω–¥—ã—Å—ã–Ω “õ–∞—Ä–∞“£—ã–∑

2. **–°–µ—Ä–≤–µ—Ä –ª–æ–≥—Ç–∞—Ä—ã–Ω —Ç–µ–∫—Å–µ—Ä—É:**
   ```bash
   # –õ–æ–∫–∞–ª—å–¥—ñ —Ä–µ–∂–∏–º–¥–µ
   npm run dev
   
   # Docker —Ä–µ–∂–∏–º—ñ–Ω–¥–µ
   docker-compose logs -f backend
   docker-compose logs -f frontend
   ```

3. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—Ç–µ—Ä—ñ–Ω —Ç–µ–∫—Å–µ—Ä—É:**
   ```bash
   curl http://localhost:3000/api/movies
   curl http://localhost:3000/api/books
   curl http://localhost:3000/api/games
   ```

4. **–ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã —Ç–µ–∫—Å–µ—Ä—É:**
   ```bash
   # Prisma Studio –∞—Ä“õ—ã–ª—ã
   npx prisma studio
   ```

---

## üìù –¢“Ø–∑–µ—Ç—ñ–ª–≥–µ–Ω —Ñ–∞–π–ª–¥–∞—Ä

1. ‚úÖ `Dockerfile` - server.js –∂–æ–ª—ã–Ω —Ç–∞–±—É –ª–æ–≥–∏–∫–∞—Å—ã
2. ‚úÖ `Dockerfile.frontend` - server.js –∂–æ–ª—ã–Ω —Ç–∞–±—É –ª–æ–≥–∏–∫–∞—Å—ã
3. ‚úÖ `docker-compose.yml` - –∫–æ–º–∞–Ω–¥–∞ –∂–æ–ª—ã
4. ‚úÖ `lib/firebase.ts` - Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
5. ‚úÖ `env.example` - –º—ã—Å–∞–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∞–π–ª—ã

---

## üéØ –ö–µ–ª–µ—Å—ñ “õ–∞–¥–∞–º–¥–∞—Ä

1. `.env.local` —Ñ–∞–π–ª—ã–Ω “õ“±—Ä—É –∂”ô–Ω–µ –±–∞–ø—Ç–∞—É
2. –ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –¥–∞–π—ã–Ω–¥–∞—É
3. –õ–æ–∫–∞–ª—å–¥—ñ —Ä–µ–∂–∏–º–¥–µ —Ç–µ—Å—Ç—ñ–ª–µ—É
4. Docker-–¥–∞ —Ç–µ—Å—Ç—ñ–ª–µ—É (–µ–≥–µ—Ä “õ–∞–∂–µ—Ç –±–æ–ª—Å–∞)

---

**–î–∞—Ç–∞:** 2024
**–°—Ç–∞—Ç—É—Å:** –ë–∞—Ä–ª—ã“õ –Ω–µ–≥—ñ–∑–≥—ñ —Ç“Ø–∑–µ—Ç—É–ª–µ—Ä –æ—Ä—ã–Ω–¥–∞–ª–¥—ã ‚úÖ

