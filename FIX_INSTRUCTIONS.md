# –°–∞–π—Ç –º”ô—Å–µ–ª–µ–ª–µ—Ä—ñ–Ω —Ç“Ø–∑–µ—Ç—É –Ω“±—Å“õ–∞—É–ª–∞—Ä—ã

## ‚úÖ –û—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω —Ç“Ø–∑–µ—Ç—É–ª–µ—Ä:

1. **API –º–∞—Ä—à—Ä—É—Ç—Ç–∞—Ä—ã —Ç“Ø–∑–µ—Ç—ñ–ª–¥—ñ:**
   - `app/api/auth/register/route.ts` ‚Üí –µ–Ω–¥—ñ `@/lib/auth` –ø–∞–π–¥–∞–ª–∞–Ω–∞–¥—ã (–±–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ)
   - `app/api/auth/login/route.ts` ‚Üí –µ–Ω–¥—ñ `@/lib/auth` –ø–∞–π–¥–∞–ª–∞–Ω–∞–¥—ã
   - `app/api/auth/me/route.ts` ‚Üí –µ–Ω–¥—ñ `@/lib/auth` –ø–∞–π–¥–∞–ª–∞–Ω–∞–¥—ã
   - `app/api/users/make-admin/route.ts` ‚Üí –µ–Ω–¥—ñ `@/lib/auth` –ø–∞–π–¥–∞–ª–∞–Ω–∞–¥—ã

2. **`lib/auth.ts`-“õ–∞ `updateUserRole` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã “õ–æ—Å—ã–ª–¥—ã**

## üìã “ö–∞–ª“ì–∞–Ω “õ–∞–¥–∞–º–¥–∞—Ä:

### 1. `.env.local` —Ñ–∞–π–ª—ã–Ω “õ“±—Ä—É

–¢“Ø–±—ñ—Ä–¥–µ `.env.local` —Ñ–∞–π–ª—ã–Ω “õ“±—Ä—ã“£—ã–∑ (`.env` –µ–º–µ—Å, `.env.local`):

```env
# –ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Å—ã
# –ï–°–ö–ï–†–¢–£: your_password –æ—Ä–Ω—ã–Ω–∞ ”©–∑ PostgreSQL –ø–∞—Ä–æ–ª—ñ“£—ñ–∑–¥—ñ “õ–æ–π—ã“£—ã–∑!
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/mediacatalog?schema=public"

# JWT Secret (–∫–µ–º—ñ–Ω–¥–µ 32 —Ç–∞“£–±–∞ –±–æ–ª—É—ã –∫–µ—Ä–µ–∫)
# –ï–°–ö–ï–†–¢–£: Production-–¥–∞ –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ ”©–∑–≥–µ—Ä—Ç—ñ“£—ñ–∑!
JWT_SECRET="your-secret-key-change-in-production-min-32-chars-long-please-change"

# Next.js Base URL
NEXT_PUBLIC_BASE_URL="http://localhost:3000"
```

**–ú–∞“£—ã–∑–¥—ã:**
- `your_password` –æ—Ä–Ω—ã–Ω–∞ ”©–∑ PostgreSQL –ø–∞—Ä–æ–ª—ñ“£—ñ–∑–¥—ñ “õ–æ–π—ã“£—ã–∑
- `JWT_SECRET` –∫–µ–º—ñ–Ω–¥–µ 32 —Ç–∞“£–±–∞ –±–æ–ª—É—ã –∫–µ—Ä–µ–∫
- Production-–¥–∞ `JWT_SECRET`-—Ç—ñ –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ ”©–∑–≥–µ—Ä—Ç—ñ“£—ñ–∑!

### 2. PostgreSQL –±–∞–∑–∞—Å—ã–Ω –¥–∞–π—ã–Ω–¥–∞—É

#### 2.1. PostgreSQL –æ—Ä–Ω–∞—Ç—ã–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É:
```bash
psql --version
```

#### 2.2. –ë–∞–∑–∞–Ω—ã “õ“±—Ä—É:
```bash
# PostgreSQL-–≥–µ –∫—ñ—Ä—ñ“£—ñ–∑
psql -U postgres

# –ë–∞–∑–∞–Ω—ã “õ“±—Ä—ã“£—ã–∑
CREATE DATABASE mediacatalog;

# –®—ã“ì—ã“£—ã–∑
\q
```

### 3. Prisma —Å—Ö–µ–º–∞—Å—ã–Ω –±–∞–∑–∞“ì–∞ “õ–æ—Å—É

```bash
# 1. Prisma –∫–ª–∏–µ–Ω—Ç—ñ–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É
npm run db:generate

# 2. –ë–∞–∑–∞“ì–∞ —Å—Ö–µ–º–∞–Ω—ã “õ–æ—Å—É
npm run db:push
```

### 4. –°–µ—Ä–≤–µ—Ä–¥—ñ —ñ—Å–∫–µ “õ–æ—Å—É

```bash
npm run dev
```

–°–µ—Ä–≤–µ—Ä `http://localhost:3000` –∞–¥—Ä–µ—Å—ñ–Ω–¥–µ —ñ—Å–∫–µ “õ–æ—Å—ã–ª–∞–¥—ã.

## üß™ –¢–µ—Å—Ç—ñ–ª–µ—É

### API —Ç–µ—Å—Ç—ñ–ª–µ—É (PowerShell):

```powershell
# 1. –§–∏–ª—å–º–¥–µ—Ä–¥—ñ —Ç–µ–∫—Å–µ—Ä—É
Invoke-WebRequest -Uri "http://localhost:3000/api/movies" -Method GET

# 2. –ö—ñ—Ç–∞–ø—Ç–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É
Invoke-WebRequest -Uri "http://localhost:3000/api/books" -Method GET

# 3. –¢—ñ—Ä–∫–µ–ª—É —Ç–µ–∫—Å–µ—Ä—É
$body = @{
    email = "test@example.com"
    password = "test123"
    name = "–¢–µ—Å—Ç –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:3000/api/auth/register" -Method POST -Body $body -ContentType "application/json"

# 4. –ö—ñ—Ä—É —Ç–µ–∫—Å–µ—Ä—É
$body = @{
    email = "test@example.com"
    password = "test123"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:3000/api/auth/login" -Method POST -Body $body -ContentType "application/json"
```

### –ë—Ä–∞—É–∑–µ—Ä–¥–µ —Ç–µ–∫—Å–µ—Ä—É:

1. `http://localhost:3000` - –±–∞—Å—Ç—ã –±–µ—Ç
2. `http://localhost:3000/api/movies` - API —Ç–µ–∫—Å–µ—Ä—É
3. `http://localhost:3000/api/books` - API —Ç–µ–∫—Å–µ—Ä—É
4. `http://localhost:3000/api/games` - API —Ç–µ–∫—Å–µ—Ä—É

## ‚ö†Ô∏è –ï—Å–∫–µ—Ä—Ç—É–ª–µ—Ä

1. **DATABASE_URL** - PostgreSQL –ø–∞—Ä–æ–ª—ñ“£—ñ–∑–¥—ñ –¥“±—Ä—ã—Å “õ–æ–π—ã“£—ã–∑
2. **JWT_SECRET** - –ö–µ–º—ñ–Ω–¥–µ 32 —Ç–∞“£–±–∞ –±–æ–ª—É—ã –∫–µ—Ä–µ–∫
3. **–ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ** - –ï–≥–µ—Ä –±–∞–∑–∞“ì–∞ –±–∞–π–ª–∞–Ω—ã—Å –∂–æ“õ –±–æ–ª—Å–∞, —Å–∞–π—Ç mock –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–º–µ–Ω –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ, –±—ñ—Ä–∞“õ –¥–µ—Ä–µ–∫—Ç–µ—Ä —Å–∞“õ—Ç–∞–ª–º–∞–π–¥—ã
4. **–°–µ—Ä–≤–µ—Ä** - `npm run dev` —ñ—Å–∫–µ “õ–æ—Å—ã–ª“ì–∞–Ω –±–æ–ª—É—ã –∫–µ—Ä–µ–∫

## üîç –ú”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ —à–µ—à—É

### –ï–≥–µ—Ä –±–∞–∑–∞“ì–∞ –±–∞–π–ª–∞–Ω—ã—Å “õ–∞—Ç–µ—Å—ñ –±–æ–ª—Å–∞:

1. PostgreSQL —Å–µ—Ä–≤–µ—Ä—ñ —ñ—Å–∫–µ “õ–æ—Å—ã–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑
2. `.env.local` —Ñ–∞–π–ª—ã–Ω–¥–∞ `DATABASE_URL` –¥“±—Ä—ã—Å –µ–∫–µ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑
3. –ë–∞–∑–∞ “õ“±—Ä—ã–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑: `psql -U postgres -l`
4. `npm run db:push` –æ—Ä—ã–Ω–¥–∞“£—ã–∑

### –ï–≥–µ—Ä API “õ–∞—Ç–µ—Å—ñ –±–æ–ª—Å–∞:

1. –°–µ—Ä–≤–µ—Ä —ñ—Å–∫–µ “õ–æ—Å—ã–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑
2. –¢–µ—Ä–º–∏–Ω–∞–ª–¥–∞ “õ–∞—Ç–µ–ª–µ—Ä–¥—ñ “õ–∞—Ä–∞“£—ã–∑
3. –ë—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å—ñ–Ω–¥–µ “õ–∞—Ç–µ–ª–µ—Ä–¥—ñ “õ–∞—Ä–∞“£—ã–∑

### –ï–≥–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∂“±–º—ã—Å —ñ—Å—Ç–µ–º–µ—Å–µ:

1. `.env.local` —Ñ–∞–π–ª—ã–Ω–¥–∞ `JWT_SECRET` –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑
2. –°–µ—Ä–≤–µ—Ä–¥—ñ “õ–∞–π—Ç–∞ —ñ—Å–∫–µ “õ–æ—Å—ã“£—ã–∑ (`npm run dev`)
3. Cookie-–ª–µ—Ä–¥—ñ —Ç–∞–∑–∞–ª–∞“£—ã–∑












