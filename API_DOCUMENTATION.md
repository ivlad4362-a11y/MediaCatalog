# API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Å—ã

## üìã –ë–∞—Ä–ª—ã“õ API-–ª–∞—Ä–¥—ã“£ —Ç—ñ–∑—ñ–º—ñ

### ‚úÖ –¢–µ—Å—Ç –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ:
- ‚úÖ **–°”ô—Ç—Ç—ñ:** 7 API
- ‚ö†Ô∏è **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è “õ–∞–∂–µ—Ç:** 5 API
- ‚ùå **“ö–∞—Ç–µ–ª–µ—Ä:** 0
- üìä **–ë–∞—Ä–ª—ã“ì—ã:** 12 API

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API-–ª–∞—Ä—ã

### 1. GET `/api/auth/me`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ê“ì—ã–º–¥–∞“ì—ã –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã“£ –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä—ñ–Ω –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å (—Ç–µ–∫ —Ç–æ–∫–µ–Ω —Ç–µ–∫—Å–µ—Ä—ñ–ª–µ–¥—ñ)
**–ñ–∞—É–∞–ø:**
```json
{
  "user": {
    "id": "string",
    "email": "string",
    "name": "string",
    "role": "user" | "admin"
  }
}
```

### 2. POST `/api/auth/login`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã“ì–∞ –∫—ñ—Ä—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "email": "string",
  "password": "string"
}
```
**–ñ–∞—É–∞–ø:**
```json
{
  "token": "string",
  "user": {
    "id": "string",
    "email": "string",
    "name": "string",
    "role": "user" | "admin"
  }
}
```

### 3. POST `/api/auth/register`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ñ–∞“£–∞ –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã —Ç—ñ—Ä–∫–µ—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "email": "string",
  "password": "string",
  "name": "string"
}
```
**–ñ–∞—É–∞–ø:**
```json
{
  "token": "string",
  "user": {
    "id": "string",
    "email": "string",
    "name": "string",
    "role": "user"
  }
}
```

### 4. POST `/api/auth/logout`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–¥–∞–Ω —à—ã“ì—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ñ–∞—É–∞–ø:**
```json
{
  "message": "Logged out successfully"
}
```

---

## üìö –ú–µ–¥–∏–∞ API-–ª–∞—Ä—ã (–∞—à—ã“õ)

### 5. GET `/api/movies`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ë–∞—Ä–ª—ã“õ —Ñ–∏–ª—å–º–¥–µ—Ä–¥—ñ –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ñ–∞—É–∞–ø:**
```json
[
  {
    "id": "string",
    "title": "string",
    "description": "string",
    "coverImage": "string",
    "type": "movie",
    "rating": 8.5,
    "year": 2010,
    "genre": ["string"],
    "popularity": 95
  }
]
```

### 6. GET `/api/books`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ë–∞—Ä–ª—ã“õ –∫—ñ—Ç–∞–ø—Ç–∞—Ä–¥—ã –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ñ–∞—É–∞–ø:** (movies —Å–∏—è“õ—Ç—ã, –±—ñ—Ä–∞“õ `type: "book"`)

### 7. GET `/api/games`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ë–∞—Ä–ª—ã“õ –æ–π—ã–Ω–¥–∞—Ä–¥—ã –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ñ–∞—É–∞–ø:** (movies —Å–∏—è“õ—Ç—ã, –±—ñ—Ä–∞“õ `type: "game"`)

### 8. GET `/api/search?q=query`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ú–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä–¥—ã —ñ–∑–¥–µ—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä:**
- `q` (query) - —ñ–∑–¥–µ—É —Å”©–∑—ñ
**–ñ–∞—É–∞–ø:**
```json
[
  {
    "id": "string",
    "title": "string",
    "description": "string",
    "coverImage": "string",
    "type": "movie" | "book" | "game",
    "rating": 8.5,
    "year": 2010,
    "genre": ["string"],
    "popularity": 95
  }
]
```

---

## üí¨ –ü—ñ–∫—ñ—Ä–ª–µ—Ä API-–ª–∞—Ä—ã

### 9. GET `/api/comments?mediaId=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ú–∞—Ç–µ—Ä–∏–∞–ª“ì–∞ –ø—ñ–∫—ñ—Ä–ª–µ—Ä–¥—ñ –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç –µ–º–µ—Å
**–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä:**
- `mediaId` - –º–∞—Ç–µ—Ä–∏–∞–ª ID-—ñ
**–ñ–∞—É–∞–ø:**
```json
[
  {
    "id": "string",
    "userId": "string",
    "userName": "string",
    "mediaId": "string",
    "text": "string",
    "rating": 8.0,
    "createdAt": "2024-01-05"
  }
]
```

### 10. POST `/api/comments`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ñ–∞“£–∞ –ø—ñ–∫—ñ—Ä “õ–æ—Å—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "mediaId": "string",
  "text": "string",
  "rating": 8.0
}
```

---

## ‚ù§Ô∏è –¢–∞“£–¥–∞—É–ª—ã–ª–∞—Ä API-–ª–∞—Ä—ã

### 11. GET `/api/favorites?userId=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã“£ —Ç–∞“£–¥–∞—É–ª—ã–ª–∞—Ä—ã–Ω –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç
**–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä:**
- `userId` - –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã ID-—ñ
**–ñ–∞—É–∞–ø:**
```json
[
  {
    "id": "string",
    "userId": "string",
    "mediaId": "string",
    "createdAt": "2024-01-05"
  }
]
```

### 12. POST `/api/favorites`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –¢–∞“£–¥–∞—É–ª—ã“ì–∞ “õ–æ—Å—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "mediaId": "string"
}
```

### 13. DELETE `/api/favorites?id=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –¢–∞“£–¥–∞—É–ª—ã–¥–∞–Ω –∂–æ—é
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç
**–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä:**
- `id` - —Ç–∞“£–¥–∞—É–ª—ã ID-—ñ

---

## üëë –ê–¥–º–∏–Ω API-–ª–∞—Ä—ã

### 14. GET `/api/users`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ë–∞—Ä–ª—ã“õ –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä–¥—ã –∞–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–ñ–∞—É–∞–ø:**
```json
[
  {
    "id": "string",
    "email": "string",
    "name": "string",
    "role": "user" | "admin"
  }
]
```

### 15. POST `/api/movies`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ñ–∞“£–∞ —Ñ–∏–ª—å–º “õ–æ—Å—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "title": "string",
  "description": "string",
  "coverImage": "string",
  "type": "movie",
  "rating": 8.5,
  "year": 2010,
  "genre": ["string"],
  "popularity": 95
}
```

### 16. PUT `/api/movies`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –§–∏–ª—å–º–¥—ñ ”©–∑–≥–µ—Ä—Ç—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "id": "string",
  "title": "string",
  "description": "string",
  "coverImage": "string",
  "rating": 8.5,
  "year": 2010,
  "genre": ["string"],
  "popularity": 95
}
```

### 17. DELETE `/api/movies?id=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –§–∏–ª—å–º–¥—ñ –∂–æ—é
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä:**
- `id` - —Ñ–∏–ª—å–º ID-—ñ

### 18. POST `/api/books`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ñ–∞“£–∞ –∫—ñ—Ç–∞–ø “õ–æ—Å—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:** (movies —Å–∏—è“õ—Ç—ã, –±—ñ—Ä–∞“õ `type: "book"`)

### 19. PUT `/api/books`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ö—ñ—Ç–∞–ø—Ç—ã ”©–∑–≥–µ—Ä—Ç—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç

### 20. DELETE `/api/books?id=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ö—ñ—Ç–∞–ø—Ç—ã –∂–æ—é
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç

### 21. POST `/api/games`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ñ–∞“£–∞ –æ–π—ã–Ω “õ–æ—Å—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:** (movies —Å–∏—è“õ—Ç—ã, –±—ñ—Ä–∞“õ `type: "game"`)

### 22. PUT `/api/games`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –û–π—ã–Ω–¥—ã ”©–∑–≥–µ—Ä—Ç—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç

### 23. DELETE `/api/games?id=id`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –û–π—ã–Ω–¥—ã –∂–æ—é
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç

### 24. POST `/api/users/make-admin`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã –∞–¥–º–∏–Ω “õ—ã–ª—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–¥–º–∏–Ω “õ–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "email": "string"
}
```

### 25. POST `/api/users/change-password`
**–°–∏–ø–∞—Ç—Ç–∞–º–∞:** –ü–∞—Ä–æ–ª—å–¥—ñ ”©–∑–≥–µ—Ä—Ç—É
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** “ö–∞–∂–µ—Ç
**–î–µ—Ä–µ–∫—Ç–µ—Ä:**
```json
{
  "currentPassword": "string",
  "newPassword": "string"
}
```

---

## üîí –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### JWT Token –ø–∞–π–¥–∞–ª–∞–Ω—É
–ö”©–ø—Ç–µ–≥–µ–Ω API-–ª–∞—Ä JWT token “õ–∞–∂–µ—Ç –µ—Ç–µ–¥—ñ. Token-–¥—ñ HTTP cookie —Ä–µ—Ç—ñ–Ω–¥–µ —Å–∞“õ—Ç–∞–ª–∞–¥—ã –Ω–µ–º–µ—Å–µ `Authorization` header-—ñ–Ω–¥–µ –∂—ñ–±–µ—Ä—ñ–ª—É—ñ –º“Ø–º–∫—ñ–Ω:

```
Authorization: Bearer <token>
```

### Cookie –ø–∞–π–¥–∞–ª–∞–Ω—É
Next.js API-–ª–∞—Ä cookie-–ª–µ—Ä–¥—ñ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ ”©“£–¥–µ–π–¥—ñ. `credentials: "include"` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑:

```javascript
fetch("/api/users", {
  credentials: "include"
})
```

---

## üìä API –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã

- **200 OK** - –°”ô—Ç—Ç—ñ
- **201 Created** - –ñ–∞“£–∞ —Ä–µ—Å—É—Ä—Å “õ“±—Ä—ã–ª–¥—ã
- **400 Bad Request** - –î–µ—Ä–µ–∫—Ç–µ—Ä –¥“±—Ä—ã—Å –µ–º–µ—Å
- **401 Unauthorized** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è “õ–∞–∂–µ—Ç
- **403 Forbidden** - –ê–¥–º–∏–Ω —Ä”©–ª—ñ “õ–∞–∂–µ—Ç
- **404 Not Found** - –†–µ—Å—É—Ä—Å —Ç–∞–±—ã–ª–º–∞–¥—ã
- **500 Internal Server Error** - –°–µ—Ä–≤–µ—Ä “õ–∞—Ç–µ—Å—ñ

---

## üß™ API-–ª–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É

API-–ª–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É “Ø—à—ñ–Ω:

```bash
npm run test-apis
```

–ë“±–ª —Å–∫—Ä–∏–ø—Ç –±–∞—Ä–ª—ã“õ API-–ª–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—ñ–ø, –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ –∫”©—Ä—Å–µ—Ç–µ–¥—ñ.

---

## üìù –ï—Å–∫–µ—Ä—Ç—É–ª–µ—Ä

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ö”©–ø—Ç–µ–≥–µ–Ω API-–ª–∞—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è “õ–∞–∂–µ—Ç –µ—Ç–µ–¥—ñ. –ê–ª–¥—ã–º–µ–Ω `/api/auth/login` –∞—Ä“õ—ã–ª—ã –∫—ñ—Ä—ñ“£—ñ–∑.

2. **–ê–¥–º–∏–Ω —Ä”©–ª—ñ:** –ê–¥–º–∏–Ω API-–ª–∞—Ä—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã“£ `role: "admin"` –±–æ–ª—É—ã –∫–µ—Ä–µ–∫.

3. **CORS:** API-–ª–∞—Ä —Ç–µ–∫ –±—ñ—Ä –¥–æ–º–µ–Ω–Ω–µ–Ω “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É–≥–µ —Ä“±“õ—Å–∞—Ç –µ—Ç–µ–¥—ñ (Next.js default).

4. **Rate Limiting:** “ö–∞–∑—ñ—Ä–≥—ñ —É–∞“õ—ã—Ç—Ç–∞ rate limiting –∂–æ“õ, –±—ñ—Ä–∞“õ production-–¥–∞ “õ–æ—Å—ã–ª—É—ã –∫–µ—Ä–µ–∫.

---

## ‚úÖ –ù”ô—Ç–∏–∂–µ

–ë–∞—Ä–ª—ã“õ API-–ª–∞—Ä –¥“±—Ä—ã—Å –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ! –ï—à“õ–∞–Ω–¥–∞–π “õ–∞—Ç–µ –∂–æ“õ.
